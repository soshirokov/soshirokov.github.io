(()=>{"use strict";const t="http://localhost:8002",s=function(t,s,e,i){return fetch(t,{method:s,headers:e,body:JSON.stringify(i)}).then((t=>t.json()))};new Vue({el:"#mainApp",mounted:function(){s(`${t}/catalog`,"GET").then((t=>{this.goods=t,this.filteredGoods=t})),s(`${t}/basket`,"GET").then((t=>{this.cart=t}))},data:{goods:[],filteredGoods:[],basketCardVision:!1,search:"",cart:{}},methods:{filterGoods:function(){this.filteredGoods=this.goods.filter((({title:t})=>new RegExp(this.search,"gi").test(t)))},cartShow:function(){this.basketCardVision=!this.basketCardVision},deletitem:function(e,i){s(`${t}/basket`,"DELETE",{"Content-type":"application/json"},i).then((t=>{this.cart=t}))},addToCart:function(e,i){console.log(i),s(`${t}/basket`,"PATCH",{"Content-type":"application/json"},i).then((t=>{this.cart=t}))},closeCart:function(){this.basketCardVision=!1}},computed:{emptyCart(){return!(this.cart.contents.length>0)}},components:{basketCard:{data:function(){return{styles:{closebtn:{textAlign:"right",marginBottom:"20px"}}}},props:["cart"],template:'\n        <div class="cart">\n            <div class="cart-close" @click="$emit(\'close-cart\')" :style="styles.closebtn">\n            <i class="fas fa-times"></i>\n            </div>\n            <slot></slot>\n            <div class="cart-total-count">Total items:<span>{{ cart.countGoods }}</span></div>\n            <div class="cart-total-price">Total price:<span>${{ cart.amount }}</span></div>\n        </div>\n    '},basketGoodsItem:{props:["item"],template:'\n    <div class="cart-item">\n        <div class="cart-itemImg">\n        <img class="goods-image" :src="item.image">\n        </div>\n        <div class="cart-itemDesc">\n        <h4 class="cart-itemName">{{item.title}}</h4>\n        <div class="cart-itemPrice">${{item.price}} x {{item.quantity}}</div>\n        </div>\n        <div class="cart-itemRemove" @click="$emit(\'delete-item\', $event, item)">\n        <i class="fas fa-times-circle"></i>\n        </div>\n    </div>\n    '},goodsItem:{props:["item"],emits:["update"],template:'\n        <div class="goods-item">\n            <img class="goods-image" :src="item.image">\n            <button class="goods-btn" @click="$emit(\'add-to-cart\', $event, item)">Add to Cart</button>\n            <div class="goods-desc">\n                <h3 class="goods-label">{{ item.title }}</h3>\n                <div class="goods-price">${{ item.price }}</div>\n                <div class="goods-btn-box">\n            </div>\n            </div>\n        </div>\n    '}}})})();